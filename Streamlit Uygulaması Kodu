import streamlit as st
import openai

# ChatGPT API anahtarÄ± 
openai.api_key = 'API_ANAHTARI'

def get_movie_recommendations(genres, favorite_movies):
    prompt = f"""
    Benimle ÅŸu tÃ¼rlerde film Ã¶nerilerini paylaÅŸÄ±r mÄ±sÄ±n: {', '.join(genres)}.
    AyrÄ±ca, sevdiÄŸim filmler: {', '.join(favorite_movies)}. 
    Bana bu tÃ¼rlerdeki ve sevdiÄŸim filmlere benzer Ã¶neriler ver. 
    Ã–nerileri tablo formatÄ±nda ve her film iÃ§in filmin adÄ±, tÃ¼rÃ¼ ve kÄ±sa Ã¶zeti ÅŸeklinde yaz.
    """

    response = openai.Completion.create(
        engine="text-davinci-003",
        prompt=prompt,
        max_tokens=150,
        temperature=0.5
    )

    return response.choices[0].text.strip()

st.title("Film Ã–neri Sistemi")
st.write("NasÄ±l Ã‡alÄ±ÅŸÄ±r?")
st.write("ğŸ“ SevdiÄŸiniz film tÃ¼rlerini seÃ§in")
st.write("ğŸ“ En sevdiÄŸiniz 3 filmi belirtin")
st.write("ğŸ“ Bilgileri gÃ¶nderin")
st.write("ğŸ“ Size Ã¶zel film Ã¶nerileri alÄ±n!")

genres = st.multiselect(
    "Film TÃ¼rleri",
    ['Aksiyon', 'Komedi', 'Drama', 'Bilim Kurgu', 'Korku']
)

favorite_movies = [
    st.text_input("1. Film"),
    st.text_input("2. Film"),
    st.text_input("3. Film")
]

if st.button("Ã–neriler Al"):
    recommendations = get_movie_recommendations(genres, favorite_movies)
    st.write("Ã–nerilen Filmler:")
    st.write(recommendations)
